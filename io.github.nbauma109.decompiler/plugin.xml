<?xml version="1.0" encoding="UTF-8"?>
<!--
###############################################################################
# Copyright (c) 2017 Chen Chao and other ECD project contributors.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Eclipse Public License v1.0
# which accompanies this distribution, and is available at
# https://www.eclipse.org/legal/epl-v10.html
###############################################################################
-->
<plugin>
  <extension-point id="decompilerAdapters" name="decompilerAdapters" schema="schema/decompilerAdapters.exsd"/>
    <extension
         point="org.eclipse.ui.editors">
      <editor
            name="%DecompilerView"
            icon="icons/decompiler.png"
            extensions="class"
            class="io.github.nbauma109.decompiler.editor.JavaDecompilerClassFileEditor"
            contributorClass="org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditorActionContributor"
            id="io.github.nbauma109.decompiler.ClassFileEditor"
            symbolicFontName="org.eclipse.jdt.ui.editors.textfont"
            filenames="*.class without source">
            <contentTypeBinding
               contentTypeId="org.eclipse.jdt.core.javaClass"
            /> 
      </editor>
   </extension>
   <extension         
         point="org.eclipse.ui.editorActions">
      <editorContribution
            targetID="io.github.nbauma109.decompiler.ClassFileEditor"
            id="io.github.nbauma109.decompiler.ClassFileEditor.BreakpointRulerActions">
         <action
               label="Toggle Breakpoint"
               class="org.eclipse.debug.ui.actions.RulerToggleBreakpointActionDelegate"
               actionID="RulerDoubleClick"
               id="org.eclipse.jdt.debug.ui.actions.ManageBreakpointRulerAction">
         </action>
      </editorContribution>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="%Decompiler"
            category="org.eclipse.jdt.ui.preferences.JavaBasePreferencePage"
            class="io.github.nbauma109.decompiler.preferences.JavaDecompilerPreferencePage"
            id="io.github.nbauma109.decompiler.Main">
      </page>
      <page
            name="%Nexus"
            category="io.github.nbauma109.decompiler.Main"
            class="io.github.nbauma109.decompiler.preferences.NexusPreferencePage"
            id="io.github.nbauma109.decompiler.Nexus">
      </page>
      <page
            name="%Public.Repositories"
            category="io.github.nbauma109.decompiler.Main"
            class="io.github.nbauma109.decompiler.preferences.PublicRepositoriesPreferencePage"
            id="io.github.nbauma109.decompiler.PublicRepositories">
      </page>
   </extension>
   <extension
         point="org.eclipse.jdt.ui.javaElementFilters">
      <filter
            targetId="org.eclipse.jdt.ui.PackageExplorer"
            name="%Decompiler.Filter"
            enabled="true"
            description="%Decompiler.Filter.Description"
            pattern=".decompiler*">
      </filter>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            class="io.github.nbauma109.decompiler.actions.OpenClassWithContributionFactory"
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?before=group.edit">
      </menuContribution>
      <menuContribution
            allPopups="false"
            class="io.github.nbauma109.decompiler.actions.OpenClassWithContributionFactory"
            locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?before=group.edit">
      </menuContribution>
      <menuContribution
            allPopups="false"
            class="io.github.nbauma109.decompiler.actions.ExportSourceContributionFactory"
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?before=group.edit">
      </menuContribution>
      <menuContribution
            allPopups="false"
            class="io.github.nbauma109.decompiler.actions.ExportSourceContributionFactory"
            locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?before=group.edit">
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.startup">
      <startup class="io.github.nbauma109.decompiler.Startup"/>
   </extension>
   <extension point="org.eclipse.ui.commands">  
      <category id="io.github.nbauma109.decompiler"  
            name="Enhanced Class Decompiler">  
      </category>  
      <command  
            name="Decompile"  
            categoryId="io.github.nbauma109.decompiler"  
            id="io.github.nbauma109.decompiler.decompile">  
      </command> 
      <command  
            name="Decompile"  
            categoryId="io.github.nbauma109.decompiler"  
            id="io.github.nbauma109.decompiler.debugMode">  
      </command>
      <command  
            name="Show Source Code"  
            categoryId="io.github.nbauma109.decompiler"  
            id="io.github.nbauma109.decompiler.sourcecode">  
      </command>
      <command  
            name="Decompile"  
            categoryId="io.github.nbauma109.decompiler"  
            id="io.github.nbauma109.decompiler.decompile">  
      </command>  
   </extension> 
   <extension
     point="org.eclipse.ui.bindings">
     <key
          sequence="Ctrl+Alt+,"
          commandId="io.github.nbauma109.decompiler.decompile"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
    </key>
    <key
          sequence="Ctrl+Alt+."
          commandId="io.github.nbauma109.decompiler.debugMode"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
    </key>
   </extension>
   <extension  
         point="org.eclipse.ui.handlers">  
      <handler  
            commandId="io.github.nbauma109.decompiler.decompile"  
            class="io.github.nbauma109.decompiler.actions.DecompileHandler">  
      </handler>
      <handler  
            commandId="io.github.nbauma109.decompiler.sourcecode"  
            class="io.github.nbauma109.decompiler.actions.SourceCodeHandler">  
      </handler> 
   </extension>
   <extension
         point="org.eclipse.ui.popupMenus">
      <viewerContribution
            targetID="#ClassFileEditorContext"
            id="io.github.nbauma109.decompiler.ExportSourceMenuAction">
         <action
               label="%ExportSource"
               class="io.github.nbauma109.decompiler.actions.ExportSourceActionDelegate"
               menubarPath="io.github.nbauma109.decompiler.main"
               id="io.github.nbauma109.decompiler.actions.ExportSourceAction"
               icon="icons/etool16/export_wiz.png"
               >
         </action>
         <action
               label="%ShowSourceCode"
               class="io.github.nbauma109.decompiler.actions.SourceCodeActionDelegate"
               menubarPath="io.github.nbauma109.decompiler.source"
               id="io.github.nbauma109.decompiler.actions.SourceCodeAction"
               style="toggle"
               >
         </action>
      </viewerContribution>
   </extension>
   <extension
       point="org.eclipse.ui.actionSetPartAssociations">
      <actionSetPartAssociation targetID="io.github.nbauma109.decompiler.decompilerActionSet">
         <part id="io.github.nbauma109.decompiler.ClassFileEditor"/>
      </actionSetPartAssociation>
   </extension>
   <extension
         point="org.eclipse.ui.actionSets">         
         <actionSet
            label="%Decompiler"
            visible="false"
            id="io.github.nbauma109.decompiler.decompilerActionSet">
         <menu
               label="%DecompilerBar"
               id="decompilerMenu">
               <separator
                  name="decompilerGroup">
           </separator>
           <separator
                  name="sourceGroup">
           </separator>
           <separator
                  name="debugGroup">
           </separator>
           <separator
                  name="preferenceGroup">
           </separator>
         </menu>
         <action
               class="io.github.nbauma109.decompiler.actions.DecompilerMenuItemAction"
               enablesFor="*"
               hoverIcon="icons/decompiler.png"
               icon="icons/decompiler.png"
               id="io.github.nbauma109.decompiler.actions.DecompilerToolbarMenu"
               label="%Decompiler"
               style="pulldown"
               toolbarPath="org.eclipse.ui.edit.text.actionSet.presentation/Decompiler"
               tooltip="%Decompiler">
         </action>
         <action
               class="io.github.nbauma109.decompiler.actions.ProjectHomePageAction"
               enablesFor="*"
               hoverIcon="icons/github.png"
               icon="icons/github.png"
               id="io.github.nbauma109.decompiler.actions.ProjectHomePage"
               label="%ProjectHomePage"
               style="push"
               toolbarPath="org.eclipse.ui.edit.text.actionSet.presentation/Decompiler"
               tooltip="%ProjectHomePageTooltip">
         </action>
         <action
               class="io.github.nbauma109.decompiler.actions.ExportSourceMenuItemAction"
               enablesFor="*"
               hoverIcon="icons/etool16/export_wiz.png"
               icon="icons/etool16/export_wiz.png"
               disabledIcon="icons/dtool16/export_wiz.png"
               id="io.github.nbauma109.decompiler.actions.ExportSourceMenu"
               label="%ExportSource"
               style="push"
               menubarPath="decompilerMenu/decompilerGroup">
         </action>
         <action
               class="io.github.nbauma109.decompiler.actions.DecompilerMenuItemAction"
               enablesFor="*"
               hoverIcon="icons/decompiler.png"
               icon="icons/decompiler.png"
               id="io.github.nbauma109.decompiler.actions.DecompilerMenu"
               label="%DecompilerAction"
               style="pulldown"
               menubarPath="decompilerMenu/decompilerGroup">
         </action>
         <action
               class="io.github.nbauma109.decompiler.actions.PreferenceMenuItemAction"
               enablesFor="*"
               id="io.github.nbauma109.decompiler.actions.preferenceMenu"
               label="%Preferences"
               style="push"
               menubarPath="decompilerMenu/preferenceGroup">
         </action>
         <action
               class="io.github.nbauma109.decompiler.actions.SourceCodeMenuItemAction"
               enablesFor="*"
               id="io.github.nbauma109.decompiler.actions.sourceCodeMenu"
               label="%ShowSourceCode"
               style="toggle"
               menubarPath="decompilerMenu/sourceGroup">
         </action>
         <action
               allowLabelUpdate="true"
               style="toggle"
               toolbarPath="org.eclipse.ui.edit.text.actionSet.presentation/Presentation"
               id="org.eclipse.jdt.ui.edit.text.java.toggleMarkOccurrences"
               definitionId="org.eclipse.jdt.ui.edit.text.java.toggleMarkOccurrences"
               disabledIcon="icons/dtool16/mark_occurrences.png"
               icon="icons/etool16/mark_occurrences.png"
               helpContextId="org.eclipse.jdt.ui.toggle_mark_occurrences_action_context"
               label="%toggleMarkOccurrences.label"
               retarget="true"
               tooltip="%toggleMarkOccurrences.tooltip">
         </action>
         <action
               allowLabelUpdate="true"
               style="toggle"
               toolbarPath="org.eclipse.ui.edit.text.actionSet.presentation/Presentation"
               id="org.eclipse.jdt.ui.edit.text.java.toggleBreadcrumb"
               definitionId="org.eclipse.jdt.ui.edit.text.java.toggleBreadcrumb"
               disabledIcon="icons/dtool16/toggle_breadcrumb.png"
               icon="icons/etool16/toggle_breadcrumb.png"
               helpContextId="org.eclipse.jdt.ui.toggle_mini_browser_action_context"
               label="%toggleBreadcrumb.label"
               retarget="true"
               tooltip="%toggleBreadcrumb.tooltip">
         </action>
      </actionSet>
   </extension>
   <extension point="org.eclipse.help.toc">
    <toc file="doc/toc.xml" primary="true" />
  </extension>	 
</plugin>
